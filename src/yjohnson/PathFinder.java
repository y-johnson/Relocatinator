package yjohnson;import mediatypes.Movie;import yjohnson.ConsoleEvent;import java.io.File;import java.util.ArrayList;import java.util.Arrays;import java.util.Objects;/** * PathFinder: * Class reserved for file and directory operations. */public class PathFinder {    public static boolean verifyExistence(String path, boolean makeIfNotPresent) {        ConsoleEvent.print("Verifying if " + path + " exists.", ConsoleEvent.logStatus.DETAIL);        File f = new File(path);        if (f.exists()) {            ConsoleEvent.print(path + " exists.", ConsoleEvent.logStatus.DETAIL);        } else {            ConsoleEvent.print(path + " was not found.", ConsoleEvent.logStatus.NOTICE);            if (makeIfNotPresent) {                ConsoleEvent.print("Creating " + path + "...", ConsoleEvent.logStatus.DETAIL);                if (f.mkdirs()) {                    ConsoleEvent.print(path + " created successfully.", ConsoleEvent.logStatus.NOTICE);                } else {                    ConsoleEvent.closeProgram(path + " could not be created.", -1);                }            }        }        return f.exists();    }    /**     * When given a directory to search, it will recursively check inside all subfolders within that directory for     * for files, add them all to an ArrayList, then remove all files and directories that do not contain the     * extensionToSearch from that list.     *     * @param directory         the source to find files in     * @param extensionToSearch the file extension you want to filter     * @return an ArrayList of all the files within the directory     */    public static ArrayList<File> findFiles(File directory, String extensionToSearch) {        // Starting file search        String msg = "Searching for files with " + extensionToSearch + " extension inside directory " + directory + "...";        ConsoleEvent.print(msg, ConsoleEvent.logStatus.DETAIL);        // Make an array of files and directories that contain the extensionToSearch extension        ArrayList<File> listOfFiles = new ArrayList<>();        // Make Array -> List -> ArrayList        try {            // requireNonNull keeps the array empty if there are no files found            listOfFiles.addAll(Arrays.asList(Objects.requireNonNull(directory.listFiles())));        } catch (NullPointerException n) {            ConsoleEvent.print("No directory named \"" + directory + "\" exists.", ConsoleEvent.logStatus.NOTICE);        }        /* Remove the directories and files that do not contain the extension */        for (int i = 0; i < listOfFiles.size(); ++i) {            File file = listOfFiles.get(i);            if (file.isDirectory()) {                listOfFiles.addAll(findFiles(file, extensionToSearch)); // If it's a directory, go inside and find files                listOfFiles.remove(file);                               // Then remove the directory                --i;                                                    // If we removed something, stay in that same location            } else if (!file.toString().endsWith(extensionToSearch)) {                listOfFiles.remove(listOfFiles.get(i));                 // If it does not contain the extension, remove the file                --i;                                                    // If we removed something, stay in that same location            }        }        /* No files found*/        if (listOfFiles.size() != 0) {            ConsoleEvent.print("Found " + listOfFiles.size() + " matching files inside directory " + directory + ".");        } else {            ConsoleEvent.print("No matching files found in " + directory, ConsoleEvent.logStatus.NOTICE);        }        return listOfFiles;    }    /**     * When given a directory to search, it will recursively check inside all subfolders within that directory for     * for files, add them all to an ArrayList, then remove all files and directories that do not contain the     * extensionToSearch from that list.     *     * @param directory         the source to find files in     * @param extensionToSearch the file extension you want to filter     * @return an ArrayList of all the files within the directory     */    public static ArrayList<String> findFilesAsStrings(File directory, String extensionToSearch) {        var list = new ArrayList<String>();        for (File i : findFiles(directory, extensionToSearch)) {            list.add(i.toString());        }        return list;    }    /**     * Checks to see if the given directory has the required folders for the file, and if not, makes them according to     * the metadata.     *     * @param destinationFolder root directory to check, usually destinationFolder in config.ini.     * @param tvName            the clean name of the TV episode (metadata[6]).     * @param tvSeason          the season that corresponds to that episode (metadata[2]).     * @param tvSeriesName      the series' name for the TV episode (metadata[1]).     * @return the final directory where the episodes end up in.     */    public static String tvFolders(String destinationFolder, String tvName, String tvSeason, String tvSeriesName) {        // First, the TV series' main folder. Then, the series' seasons folders.        File workingDir = new File((destinationFolder + "/" + tvSeriesName.trim() + "/" + tvSeason.trim()).trim());        verifyExistence(workingDir.toString(), true);        ConsoleEvent.print("Output directory for " + tvName + ": " + workingDir, ConsoleEvent.logStatus.DETAIL);        return workingDir.toString() + "/";    }    /**     * Checks to see if the given directory has the required folders for the file, and if not, makes them according to     * the metadata.     *     * @param destinationFolder root directory to check, usually destinationFolder in config.ini.     * @param movieName         the name of the movie (metadata[6])     * @param movieYear         the release year for the movie (metadata[1])     * @return the final directory where the movie ends up in.     */    public static String movieFolders(String destinationFolder, String movieName, String movieYear) {        // Create folder for movie        String path = destinationFolder + "/" + movieName;        //If the movie year is known, add it to the path        if (!movieYear.equals(Movie.YEAR_UNKNOWN)) {            path += " (" + movieYear + ")";        }        verifyExistence(path, true);        ConsoleEvent.print("Output directory for " + movieName + ": " + path);        return path + "/";    }}